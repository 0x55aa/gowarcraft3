Battle.net Documentation generated by BNETDocs Redux
=======================================================

Notes:
-------
A Battle.net server usually listens on TCP/IP port 6112.
A message and its response have the same ID. (The response to BNLS_CDKEY is BNLS_CDKEY, etc)

===============================
Begin Generated Documentation
===============================

Battle.net Messages
------------------------------

S > C [0x00] SID_NULL
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 [blank]

Remarks:
Keeps the connection alive. Clients do not need to respond to this message.

~~~~~~~~~~~~~~~~

C > S [0x00] SID_NULL
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III, 

Format:
 [blank] 

Remarks:
Keeps the connection alive. This message should be sent to the server every 8 minutes (approximately).

~~~~~~~~~~~~~~~~

C > S [0x02] SID_STOPADV
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 [blank]

Remarks:
This message is sent to inform the server that a game should no longer be advertised to other users. It is sent when a
game starts, or when a game is aborted (the host leaves).

 All Battle.snp clients (DRTL, DSHR, STAR/SEXP, JSTR, SSHR, and W2BN) always send this message when logging off, even
if it not in a game.

~~~~~~~~~~~~~~~~

S > C [0x04] SID_SERVERLIST
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Starcraft, Starcraft
Japanese, Diablo I, Diablo II LOD

Format:
 (DWORD) Server version
 (STRING) [] Server list

Remarks:
Client should set the internal Battle.net server list from the contents of this message.

 This packet is supported by all Battle.snp games and Diablo II and its expansion.

~~~~~~~~~~~~~~~~

S > C [0x05] SID_CLIENTID
**************************************

Used By: Starcraft Shareware, Diablo Shareware, Warcraft II, Starcraft Japanese, Diablo I

Format:
 (DWORD) Registration Version
 (DWORD) Registration Authority
 (DWORD) Account Number
 (DWORD) Registration Token 

Remarks:
The following information is historical:

 This message used to be used to issue new values to the client for the above fields. New values were issued when the
values supplied in SID_CLIENTID were found to be invalid.

 Since these fields are no longer used, the server now sets them to zero.

~~~~~~~~~~~~~~~~

C > S [0x05] SID_CLIENTID
**************************************

Used By: Starcraft Shareware, Diablo Shareware, Warcraft II, Starcraft Japanese

Format:
 (DWORD) Registration Version
 (DWORD) Registration Authority
 (DWORD) Account Number
 (DWORD) Registration Token
 (STRING) LAN Computer Name
 (STRING) LAN Username

Remarks:
This packet was used to ensure that the client's account number was valid. All but the last two fields in this message
are now ignored, and may be set to zero.

 The 'LAN Computer Name' field is the NetBIOS name of the computer. It can be retrieved using the GetComputerName [1]
API.

 The 'Lan Username' field is the name of the currently logged on user, and may be retrieved using the GetUsername [2]
API.

 The following information is historical:

 The client would supply this data as issued by a Battle.net server. If the Registration Version, Registration
Authority, and Client Token values equated to the account number supplied (Client ID), as determined by an unknown
formula, the server would respond with the same values. If they were invalid, the server would assign new values.
Registration Version was always 1, Authority was the IP address of the server that issued the account number. Thus, the
Client Token was the secret value, used to prove that the client really owned the account in question.

~~~~~~~~~~~~~~~~

S > C [0x06] SID_STARTVERSIONING
**************************************

Used By: Starcraft Shareware, Diablo Shareware, Warcraft II, Starcraft Japanese, Diablo I

Format:
 (FILETIME) MPQ Filetime
 (STRING) MPQ Filename
 (STRING) ValueString 

Remarks:
Contains CheckRevision values.

~~~~~~~~~~~~~~~~

C > S [0x06] SID_STARTVERSIONING
**************************************

Used By: Starcraft Shareware, Diablo Shareware, Warcraft II, Starcraft Japanese, Diablo I

Format:
 (DWORD) Platform ID
 (DWORD) Product ID
 (DWORD) Version Byte
 (DWORD) Unknown (0) 

Remarks:
This message is sent to the server to start the process of checking the game files. This message is part of the old
logon process for products before Starcraft.

~~~~~~~~~~~~~~~~

S > C [0x07] SID_REPORTVERSION
**************************************

Used By: Starcraft Shareware, Diablo Shareware, Warcraft II, Starcraft Japanese, Diablo I

Format:
 (DWORD) Result
 (STRING) Patch path 

Remarks:
Reports success/failure on challenge.

 Result:
 0: Failed version check 1: Old game version 2: Success 3: Reinstall required

~~~~~~~~~~~~~~~~

C > S [0x07] SID_REPORTVERSION
**************************************

Used By: Starcraft Shareware, Diablo Shareware, Warcraft II, Starcraft Japanese, Diablo I

Format:
 (DWORD) Platform ID
 (DWORD) Product ID
 (DWORD) Version Byte
 (DWORD) EXE Version
 (DWORD) EXE Hash
 (STRING) EXE Information 

Remarks:
Contains CheckRevision response, version & EXE info.

~~~~~~~~~~~~~~~~

S > C [0x08] SID_STARTADVEX
**************************************

Used By: Starcraft Shareware

Format:
 (DWORD) Status 

Remarks:
Status
 0x00: Failed 0x01: Success

~~~~~~~~~~~~~~~~

C > S [0x08] SID_STARTADVEX
**************************************

Used By: Starcraft Shareware

Format:
 (BOOLEAN) Password protected (32-bit)
 (DWORD) Unknown
 (DWORD) Unknown
 (DWORD) Unknown
 (DWORD) Unknown
 (DWORD) Port
 (STRING) Game name
 (STRING) Game password
 (STRING) Game stats - flags, creator, statstring
 (STRING) Map name - 0x0d terminated 

Remarks:
Creates a game in a manner similar to SID_STARTADVEX2 and SID_STARTADVEX3. This is only used by Starcraft Shareware.

~~~~~~~~~~~~~~~~

S > C [0x09] SID_GETADVLISTEX
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Starcraft, Starcraft
Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (DWORD) Number of games
 If count is 0: (DWORD) Status Otherwise, games are listed thus: For each list item: (WORD) Game Type (WORD) Parameter
(DWORD) Language ID (WORD) Address Family (Always AF_INET) (WORD) Port (DWORD) Host's IP (DWORD) sin_zero (0) (DWORD)
sin_zero (0) (DWORD) Game Status (DWORD) Elapsed time (in seconds) (STRING) Game name (STRING) Game password (STRING)
Game statstring 

Remarks:
Returns a list of available games and their information. Varies depending on product.

 Note that fields from Address Family to sin_zero form a sockaddr_in structure.

 Valid status codes:
 0x00: OK 0x01: Game doesn't exist 0x02: Incorrect password 0x03: Game full 0x04: Game already started 0x06: Too many
server requests

~~~~~~~~~~~~~~~~

C > S [0x09] SID_GETADVLISTEX
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Starcraft, Starcraft
Japanese, Diablo I, Diablo II LOD

Format:
 (WORD) Product-specific condition 1
 (WORD) Product-specific condition 2
 (DWORD) Product-specific condition 3
 (DWORD) Product-specific condition 4
 (DWORD) List count
 (STRING) Game name
 (STRING) Game password
 (STRING) Game stats 

Remarks:
Retrieves a list of games.

 CONDITION 1: For STAR/SEXP/SSHR/JSTR and W2BN, Condition 1 is used to specify a game type. A value of 0 indicates that
any type is acceptable.
  Possible game types: 0x00: All 0x02: Melee 0x03: Free for all 0x04: one vs one 0x05: CTF 0x06: Greed 0x07: Slaughter
0x08: Sudden Death 0x09: Ladder 0x10: Iron man ladder 0x0A: Use Map Settings 0x0B: Team Melee 0x0C: Team FFA 0x0D: Team
CTF 0x0F: Top vs Bottom  
 For DRTL/DSHR, Condition 1 is used to specify a 'level range'. This ensures that clients receive a list of games
containing players whose experience is similar to their own.
  Possible ranges: 0x00: Level 1 0x01: 2 - 3 0x02: 4 - 5 0x03: 6 - 7 0x04: 8 - 9 0x05: 10 - 12 0x06: 13 - 16 0x07: 17 -
19 0x08: 20 - 24 0x09: 25 - 29 0x0A: 30 - 34 0x0B: 35 - 39 0x0C: 40 - 47 0x0D: 48 - 50  For all other games, this can be
set to 0x00. CONDITION 2: Unknown. Set to 0x00. CONDITION 3: For STAR/SEXP/SSHR/JSTR, Condition 3 is set to 0x30.

 For DRTL/DSHR, Condition 3 is set to 0xFFFF by the game, but setting it to 0x00 will disable any viewing limitations,
letting you view all games. CONDITION 4: Unknown. Set to 0x00. LIST COUNT: By default, DRTL/DSHR set this to 0x19. This
is the number of games to list. For a full listing, it's safe to use 0xFF.

~~~~~~~~~~~~~~~~

S > C [0x0A] SID_ENTERCHAT
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Starcraft, Starcraft
Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (STRING) Unique name
 (STRING) Statstring
 (STRING) Account name 

Remarks:
Contains Client product, realm, statstring, and is sent as the response when the client sends SID_ENTERCHAT. Unique
name is the users unique name in chat (Which may be Arta, Arta#2, Arta#3, etc). Account name is the users account name
(Which in all 3 previous examples would be Arta).

~~~~~~~~~~~~~~~~

C > S [0x0A] SID_ENTERCHAT
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (STRING) Username *
 (STRING) Statstring **

Remarks:
Joins Chat. 

 * Null on WAR3/W3XP.

 ** Null on CDKey Products, except for D2DV and D2XP when on realm characters..

~~~~~~~~~~~~~~~~

S > C [0x0B] SID_GETCHANNELLIST
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (STRING) [] Channel names, each terminated by a null string.

Remarks:
Contains a list of available channels.

 For some reason, Diablo II adds extra data to the channel list (as can be seen in game), and older clients list
blocked channels, such as Warez and Backstage.

~~~~~~~~~~~~~~~~

C > S [0x0B] SID_GETCHANNELLIST
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (DWORD) Product ID 

Remarks:
Requests a list of channels that the client is permitted to enter.

 In the past this packet returned a product list for the specified Product ID, however, the Product ID field is now
ignored -- it need not be a valid Product ID, and can be set to zero. The list of channels returned will be for the
client's product, as specified during the client's logon.

~~~~~~~~~~~~~~~~

C > S [0x0C] SID_JOINCHANNEL
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (DWORD) Flags
 (STRING) Channel 

Remarks:
Joins a channel after entering chat.
 The flags field may contain the following values:
 0x00: NoCreate join
 0x01: First join
 0x02: Forced join
 0x05: D2 first join

 NoCreate Join: This will only join the channel specified if it is not empty, and is used by clients when selecting a
channel from the channels menu. If the channel is empty, Battle.net sends a SID_CHATEVENT of type
EID_CHANNELDOESNOTEXIST, upon which official clients prompt for confirmation that the user wishes to create the channel,
in which case, it resends this packet with Flags set to Forced Join (0x02). First Join: Places user in a channel
starting with their product and country, followed by a number, ie 'Brood War GBR-1'. Also automatically sends MOTD after
entering the channel. When using this type, the Channel variable has no effect, but must be present anyway to avoid an
IP ban. This is sent when first logging onto Battle.net Forced Join: This is sent when leaving a game, and joins the
specified channel without an supplying an MOTD. D2 First Join: The same as First join, but is used for D2DV/D2XP
clients.

~~~~~~~~~~~~~~~~

C > S [0x0E] SID_CHATCOMMAND
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (STRING) Text 

Remarks:
Send text or a command to Battle.net using this packet.

 For STAR/SEXP/SSHR/JSTR, Text is UTF-8 encoded (WIDESTRING).

 It is generally accepted as unwise to send any character below a space (0x20): this includes line feeds, carriage
returns & control characters. The maximum number of characters is 223 per message.

~~~~~~~~~~~~~~~~

S > C [0x0F] SID_CHATEVENT
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (DWORD) Event ID
 (DWORD) User's Flags
 (DWORD) Ping
 (DWORD) IP Address (Defunct)
 (DWORD) Account number (Defunct)
 (DWORD) Registration Authority (Defunct)
 (STRING) Username
 (STRING) Text 

Remarks:
Contains all chat events.

 For STAR/SEXP/SSHR/JSTR, Text is UTF-8 encoded (WIDESTRING).
 Event IDs: [0x01] EID_SHOWUSER: User in channel [0x02] EID_JOIN: User joined channel [0x03] EID_LEAVE: User left
channel [0x04] EID_WHISPER: Recieved whisper [0x05] EID_TALK: Chat text [0x06] EID_BROADCAST: Server broadcast [0x07]
EID_CHANNEL: Channel information [0x09] EID_USERFLAGS: Flags update [0x0A] EID_WHISPERSENT: Sent whisper [0x0D]
EID_CHANNELFULL: Channel full [0x0E] EID_CHANNELDOESNOTEXIST: Channel doesn't exist [0x0F] EID_CHANNELRESTRICTED:
Channel is restricted [0x12] EID_INFO: Information [0x13] EID_ERROR: Error message [0x17] EID_EMOTE: Emote EID_SHOWUSER:
This is sent for each user who is already in a channel when you join it, as opposed to EID_JOIN, which is sent when a
user joins a channel you have already joined. It is also sent when logged on using D2XP/D2DV and a user requires an
update to their statstring - for example, by logging a different character onto a realm. EID_JOIN: This is sent when a
user enters the channel you are currently in. EID_LEAVE: This is sent when a user exits the channel you are currently
in. EID_WHISPER: This is sent when a user whispers you. EID_TALK: This is sent when a user (excluding self) in chat
speaks. EID_BROADCAST: The username supplied for this event is now always 'Battle.net'. Historically, username contained
the name of the Battle.net Administrator who sent the broadcast. EID_CHANNEL: The flags field for this event is used and
indicates what special conditions exist for the channel in question. See [Battle.net Flags] for more information.
EID_USERFLAGS: This is sent to inform the client of an update to one or more user's flags. Battle.net usually sends this
event for every user in the channel, even if only one user's flags have changed. This behavior can be exploited to
detect invisible users, by performing an action (such as an unsquelch) to provoke a flags update. Users included in the
flags update whose presence has not been indicated by EID_JOIN or EID_SHOWUSER can then be added to the userlist as
invisible. Care should be taken, however, to account for the possibility that an asynchronous send error has occurred.
Should an EID_JOIN or EID_SHOWUSER event occur for an invisible user, they should be marked as a normal user, not
readded to the userlist. EID_WHISPERSENT: The Flags and Ping fields in this packet is equal to the originating user -
the one who sent the whisper. In other words, EID_WHISPERSENT contains your flags & ping, not those of the person you
whispered. EID_CHANNELDOESNOTEXIST: See info on NoCreate Join in SID_JOINCHANNEL. EID_CHANNELRESTRICTED: This is sent
when attempting to join a channel which your client is not allowed to join. EID_INFO: This is information supplied by
Battle.net. This text is usually displayed by clients in yellow. EID_Error: This is error information supplied by
Battle.net. This text is usually displayed by clients in red. EID_Emote: This is sent when any user (including self)
uses the emote feature in chat.

~~~~~~~~~~~~~~~~

C > S [0x10] SID_LEAVECHAT
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 [blank] 

Remarks:
Leaves chat mode but does not disconnect. Generally sent when entering a game. This is also sent by D2DV/D2XP when
switching characters, and by all products when logging off.

~~~~~~~~~~~~~~~~

C > S [0x12] SID_LOCALEINFO
**************************************

Used By: Diablo Shareware, Warcraft II, Diablo I

Format:
 (FILETIME) System time
 (FILETIME) Local time
 (DWORD) Timezone bias
 (DWORD) SystemDefaultLCID
 (DWORD) UserDefaultLCID
 (DWORD) UserDefaultLangID
 (STRING) Abbreviated language name
 (STRING) Country name
 (STRING) Abbreviated country name
 (STRING) Country (English) 

Remarks:
Informs the server of the client's locale information. Much of this functionality has been incorporated into
SID_AUTH_INFO, and more in-depth remarks can be found there. 

~~~~~~~~~~~~~~~~

S > C [0x13] SID_FLOODDETECTED
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 [blank] 

Remarks:
Sent prior to a disconnect along with SID_MESSAGEBOX to indicate that the client has flooded off. 

~~~~~~~~~~~~~~~~

C > S [0x14] SID_UDPPINGRESPONSE
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Warcraft II, Starcraft, Starcraft Japanese, Diablo
I

Format:
 (DWORD) UDPCode 

Remarks:
Enables UDP support.

 Server supplies code via UDP packet PKT_SERVERPING (0x05). Usually 'bnet'.

 Not responding will give you a UDP Plug in chat.

~~~~~~~~~~~~~~~~

S > C [0x15] SID_CHECKAD
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III, World of Warcraft

Format:
 (DWORD) Ad ID
 (DWORD) File extension
 (FILETIME) Local file time
 (STRING) Filename
 (STRING) Link URL

Remarks:
Contains information needed to download and display an ad banner. 

~~~~~~~~~~~~~~~~

C > S [0x15] SID_CHECKAD
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (DWORD) Platform ID
 (DWORD) Product ID
 (DWORD) ID of last displayed banner
 (DWORD) Current time

Remarks:
Requests ad banner information from battle.net.

~~~~~~~~~~~~~~~~

C > S [0x16] SID_CLICKAD
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (DWORD) Ad ID
 (DWORD) Request type

Remarks:
The clients send this when an ad is clicked.

 Request Type is 0 if the client used SID_QUERYADURL to get the ad's data, 1 otherwise. 

~~~~~~~~~~~~~~~~

S > C [0x18] SID_REGISTRY
**************************************

Format:
 (DWORD) Cookie
 (DWORD) HKEY
 (STRING) Registry path
 (STRING) Registry key 

Remarks:
HKEY is the registry key root.The values are standard: 0x80000000: HKEY_CLASSES_ROOT 0x80000001: HKEY_CURRENT_USER
0x80000002: HKEY_LOCAL_MACHINE 0x80000003: HKEY_USERS 0x80000004: HKEY_PERFORMANCE_DATA 0x80000005: HKEY_CURRENT_CONFIG
0x80000006: HKEY_DYN_DATA

~~~~~~~~~~~~~~~~

C > S [0x18] SID_REGISTRY
**************************************

Format:
 (DWORD) Cookie
 (STRING) Key Value 

Remarks:
Returns the requested registry value

~~~~~~~~~~~~~~~~

S > C [0x19] SID_MESSAGEBOX
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (DWORD) Style
 (STRING) Text
 (STRING) Caption

Remarks:
Displays a message to the user. This message's fields are used as parameters for the Win32 API MessageBox [3], and can
be passed directly to it. For more information about these parameters, see the documentation for MessageBox [4] at MSDN.

~~~~~~~~~~~~~~~~

C > S [0x1A] SID_STARTADVEX2
**************************************

Used By: Diablo Shareware, Diablo I

Format:
 (DWORD) Password Protected
 (DWORD) Unknown
 (DWORD) Unknown
 (DWORD) Unknown
 (DWORD) Unknown
 (DWORD) Port
 (STRING) Game name
 (STRING) Game password
 (STRING) Unknown
 (STRING) Game stats - Flags, Creator, Statstring 

Remarks:
This message is used by Diablo to create a game.

~~~~~~~~~~~~~~~~

C > S [0x1B] SID_GAMEDATAADDRESS
**************************************

Used By: Diablo I

Format:
 (SOCKADDR) Address 

Remarks:
Specifies host & port that a game creator is using for a game.

~~~~~~~~~~~~~~~~

S > C [0x1C] SID_STARTADVEX3
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Starcraft, Starcraft
Japanese, Diablo I, Diablo II LOD

Format:
 (DWORD) Status 

Remarks:
Possible values for Status: 0x00: Ok 0x01: Failed

~~~~~~~~~~~~~~~~

C > S [0x1C] SID_STARTADVEX3
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Starcraft, Starcraft
Japanese, Diablo I, Diablo II LOD

Format:
 (DWORD) State
 (DWORD) Time since creation
 (WORD) Game Type
 (WORD) Parameter
 (DWORD) Unknown (1F)
 (DWORD) Ladder
 (STRING) Game name
 (STRING) Game password
 (STRING) Game Statstring 

Remarks:
Used by clients to inform the server that a game has been created, or that the state of a created game has changed.
 Bitwise flags for State: 0x01: Game is private 0x02: Game is full 0x04: Game contains players (other than creator)
0x08: Game is in progress Possible values for Game Type: 0x02: Melee 0x03: Free for All 0x04: 1 vs 1 0x09: Ladder 0x0A:
Use Map Settings 0x0F: Top vs Bottom 0x10: Iron Man Ladder (W2BN only) Possible values for Ladder: 0x00: Game is
NonLadder 0x01: Game is Ladder 0x03: Game is Iron Man Ladder (W2BN only) It could be that the ladder is bitwise as well,
and that 0x02 means Iron Man and 0x03 just means Iron Man + Ladder.
 Parameter appears to be 1 for all games except Top vs Bottom, where it seems to depend on the size of each team. More
research will be needed to confirm.

~~~~~~~~~~~~~~~~

S > C [0x1D] SID_LOGONCHALLENGEEX
**************************************

Used By: Warcraft II

Format:
 (DWORD) UDP Token
 (DWORD) Server Token 

Remarks:
Informs the client of the UDP Token and the Server Token.

~~~~~~~~~~~~~~~~

C > S [0x1E] SID_CLIENTID2
**************************************

Used By: Warcraft II, Starcraft Japanese, Diablo I

Format:
 (DWORD) Server VersionFor server version 1: (DWORD) Registration Version (DWORD) Registration Authority For server
version 0: (DWORD) Registration Authority (DWORD) Registration Version (DWORD) Account Number
 (DWORD) Registration Token
 (STRING) LAN computer name
 (STRING) LAN username 

Remarks:
See related link for more information.

~~~~~~~~~~~~~~~~

C > S [0x1F] SID_LEAVEGAME
**************************************

Used By: Diablo II, Diablo II LOD

Format:
 [blank] 

Remarks:
Notifies Battle.net that you have left a game. 

 Please note: This message's official name is not known, and has been invented.

~~~~~~~~~~~~~~~~

C > S [0x21] SID_DISPLAYAD
**************************************

Format:
 (DWORD) Platform ID
 (DWORD) Product ID
 (DWORD) Ad ID
 (STRING) Filename
 (STRING) URL 

Remarks:
Sent when an ad is displayed. Perhaps for statistics?

 Null strings are now sent in place of Filename and URL, since the need to truncate long strings to 128 characters was
causing inaccuracies.

~~~~~~~~~~~~~~~~

C > S [0x22] SID_NOTIFYJOIN
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Starcraft, Starcraft
Japanese, Diablo I, Diablo II LOD

Format:
 (DWORD) Product ID
 (DWORD) Product version
 (STRING) Game Name
 (STRING) Game Password 

Remarks:
Notifies bnet that Client has joined a game.

~~~~~~~~~~~~~~~~

S > C [0x25] SID_PING
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (DWORD) Ping Value

Remarks:
Used to calculate Client's ping. The received DWORD should be sent directly back to Battle.net.

 The ping displayed when in chat can be artificially inflated by delaying before sending this packet, or deflated by
responding before requested.
 Ping can be set to -1 (Strictly speaking, 0xFFFFFFFF, since ping is unsigned) by not responding to this packet at all.

~~~~~~~~~~~~~~~~

C > S [0x25] SID_PING
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (DWORD) Ping Value 

Remarks:
Ping response. Ping Value is the DWORD received in the server's initial ping message. 

~~~~~~~~~~~~~~~~

S > C [0x26] SID_READUSERDATA
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Starcraft, Starcraft
Japanese, Diablo I, Diablo II LOD

Format:
 (DWORD) Number of accounts
 (DWORD) Number of keys
 (DWORD) Request ID
 (STRING) [] Requested Key Values 

Remarks:
Contains profile information as requested by the client.

~~~~~~~~~~~~~~~~

C > S [0x26] SID_READUSERDATA
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (DWORD) Number of Accounts
 (DWORD) Number of Keys
 (DWORD) Request ID
 (STRING)[] Requested Accounts
 (STRING)[] Requested Keys

Remarks:
Requests an extended profile.

  Profile Keys: * USER PROFILES: profilesex ** profileage â€   profilelocation profiledescription 
 ACCOUNT INFO: SystemAccount Created SystemLast Logon SystemLast Logoff SystemTime Logged 
 NORMAL GAMES: recordGAMEwins recordGAMElosses recordGAMEdisconnects recordGAMElast GAME recordGAMElast GAME result 
 LADDER GAMES: recordGAME1wins recordGAME1losses recordGAME1disconnects recordGAME1last game recordGAME1last game
result recordGAME1rating recordGAME1high rating DynKeyGAME1rank 
 IRONMAN LADDER GAMES: â€¡ recordGAME3wins recordGAME3losses recordGAME3disconnects recordGAME3last game
recordGAME3last game result recordGAME3rating recordGAME3high rating DynKeyGAME3rank * This list is not complete, and
could use adding to. ** This field is defunct in STAR/SEXP/WAR3/W3XP. â€  This field is defunct. â€¡ W2BN only. 

~~~~~~~~~~~~~~~~

C > S [0x27] SID_WRITEUSERDATA
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (DWORD) Number of accounts
 (DWORD) Number of keys
 (STRING) [] Accounts to update
 (STRING) [] Keys to update
 (STRING) [] New values

Remarks:
Updates the Client's profile.
 Currently, the allowed keys for this are Sex, Location, and Description. The maximum length for the values is 512,
including the null terminator.

 See SID_READUSERDATA for more information.

~~~~~~~~~~~~~~~~

S > C [0x28] SID_LOGONCHALLENGE
**************************************

Used By: Starcraft Shareware, Diablo Shareware, Warcraft II, Starcraft Japanese, Diablo I

Format:
 (DWORD) Server Token 

Remarks:
Contains server token.

~~~~~~~~~~~~~~~~

S > C [0x29] SID_LOGONRESPONSE
**************************************

Used By: Starcraft Shareware, Diablo Shareware, Warcraft II, Starcraft Japanese, Diablo I

Format:
 (DWORD) Result 

Remarks:
Reports success/fail on password authentication.
 Result: 0x00: Invalid password 0x01: Success

~~~~~~~~~~~~~~~~

C > S [0x29] SID_LOGONRESPONSE
**************************************

Used By: Starcraft Shareware, Diablo Shareware, Warcraft II, Starcraft Japanese, Diablo I

Format:
 (DWORD) Client Token
 (DWORD) Server Token
 (DWORD) [5] Password Hash
 (STRING) Username 

Remarks:
Contains Client's username & hashed password.

 Battle.net password hashes are hashed twice. First, the password is hashed by itsself, then the following data is
hashed again and sent to Battle.net:

 Client Token
 Server Token
 First password hash (20 bytes)

 Passwords should be converted to lower case before hashing.

~~~~~~~~~~~~~~~~

S > C [0x2A] SID_CREATEACCOUNT
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Starcraft, Starcraft
Japanese, Diablo I, Diablo II LOD

Format:
 (DWORD) Result

Remarks:
Results:
 0x00: Fail 0x01: Success Reports success/fail on account creation.

~~~~~~~~~~~~~~~~

C > S [0x2A] SID_CREATEACCOUNT
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Starcraft, Starcraft
Japanese, Diablo I, Diablo II LOD

Format:
 (DWORD) [5] Hashed password
 (STRING) Username

Remarks:
Creates an account.

 Usernames longer than 15 characters are truncated, and the password is only hashed once (unlike SID_LOGONRESPONSE).

 This packet is identical to SID_CREATEACCOUNT2, but the response is limited to success/fail. Developers who wish to
provide a reason for account creation failure should use SID_CREATEACCOUNT2.

 Currently, SID_CREATEACCOUNT2 may be used with any product, but the protocol-correct packet to use depends on the
product you are emulating.

~~~~~~~~~~~~~~~~

C > S [0x2B] SID_SYSTEMINFO
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Starcraft, Starcraft Japanese, Diablo I

Format:
 (DWORD) Number of processors
 (DWORD) Processor architecture
 (DWORD) Processor level
 (DWORD) Processor timing
 (DWORD) Total physical memory
 (DWORD) Total page file
 (DWORD) Free disk space 

Remarks:
Contains system information. This packet was sent during the connection process for STAR/SEXP/DRTL/DSHR clients prior
to version 1.07. It is now only used by JSTR and SSHR. For information on how to emulate this system, please see this
topic [5].

~~~~~~~~~~~~~~~~

C > S [0x2C] SID_GAMERESULT
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Warcraft II, Starcraft, Starcraft Japanese

Format:
 (DWORD) Game type
 (DWORD) Number of results - always 8 
 (DWORD) [8] Results
 (STRING) [8] Game players - always 8 
 (STRING) Map name
 (STRING) Player score 

Remarks:
Contains end-of-game statistics. Player Score is a string containing right-aligned lines separated by 0x0A. The
positions in the 'Results' array and the 'Players' array are equivalent.
 Possible values for Game type: 0x00: Normal 0x01: Ladder 0x03: Ironman (W2BN only) Possible values for Result: 0x00:
No player 0x01: Win 0x02: Loss 0x03: Draw 0x04: Disconnect

~~~~~~~~~~~~~~~~

S > C [0x2D] SID_GETICONDATA
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Warcraft II, Warcraft III: TFT, Starcraft,
Starcraft Japanese, Diablo I, Warcraft III

Format:
 (FILETIME) Filetime
 (STRING) Filename 

Remarks:
Returns filename and filetime of default icons file.

~~~~~~~~~~~~~~~~

C > S [0x2D] SID_GETICONDATA
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Warcraft II, Warcraft III: TFT, Starcraft,
Starcraft Japanese, Diablo I, Warcraft III

Format:
 [blank] 

Remarks:
Requests the filename developers should use the SID_CHECKDATAFILE2 message.
 Status: 0x00: Rejected 0x01: Approved 0x02: Ladder approved

~~~~~~~~~~~~~~~~

C > S [0x32] SID_CHECKDATAFILE
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Warcraft II, Starcraft, Starcraft Japanese

Format:
 (DWORD) [5] File checksum
 (STRING) File name

Remarks:
This message was used to check a digest of a game file. This message is no longer used; developers should use the
SID_CHECKDATAFILE2 message.

 The digest is created by using the broken SHA-1 hash on the first 64-bytes of the (filesize % 64) times. This due to a
bug in the client. 

~~~~~~~~~~~~~~~~

S > C [0x33] SID_GETFILETIME
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III, World of Warcraft

Format:
 (DWORD) Request ID
 (DWORD) Unknown
 (FILETIME) Last update time
 (STRING) Filename 

Remarks:
Contains the latest filetime for the requested file. If the file does not exist, the returned filetime is null.

~~~~~~~~~~~~~~~~

C > S [0x33] SID_GETFILETIME
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Diablo Shareware, Diablo II, Warcraft II, Warcraft III: TFT,
Starcraft, Starcraft Japanese, Diablo I, Diablo II LOD, Warcraft III

Format:
 (DWORD) Request ID
 (DWORD) Unknown
 (STRING) Filename

Remarks:
This packet seems to request the current filetime for the specified file. Purpose of first 2 DWORDs is unknown,
however, both are echoed back to the client by Battle.net and do not seem to affect the reply. Because of this it is
reasonable to assume that first DWORD at least is a request ID of some kind. This is called into question, however, by
the fact that the replying packet also contains the requested filename. The game (STAR/SEXP) always sends the same
number in DWORD 1 for the file in question. DWORD 2 seems to be null.

 Known codes for DWORD 1: 0x01: tos_usa.txt
 0x03: bnserver-WAR3.ini
 0x1A: tos_USA.txt
 0x1B: bnserver.ini
 0x1D: icons_STAR.bni
 0x80000005: IX86ExtraWork.mpq
 0x80000004: bnserver-D2DV.ini

~~~~~~~~~~~~~~~~

S > C [0x34] SID_QUERYREALMS
**************************************

Used By: Diablo II, Diablo II LOD

Format:
 (DWORD) Unknown
 (DWORD) Count
 For Each Realm: (DWORD) Unknown (STRING) Realm title (STRING) Realm description

Remarks:
Realm list.

 The first Unknown is usually 0. The second [and subsequent] Unknown is usually 1.

 This packet is no longer used. SID_QUERYREALMS2 is used instead.

~~~~~~~~~~~~~~~~

C > S [0x34] SID_QUERYREALMS
**************************************

Used By: Diablo II, Diablo II LOD

Format:
 (DWORD) Unused (0)
 (DWORD) Unused (0)
 (STRING) Unknown (empty)

Remarks:
Requests a realm listing.

 This packet is no longer used. SID_QUERYREALMS2 is used instead.

~~~~~~~~~~~~~~~~

S > C [0x35] SID_PROFILE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (BYTE) Success
 (STRING) ProfileDescription value
 (STRING) ProfileLocation value
 (DWORD) Clan Tag

Remarks:
If the status code is 0, the request was successful; otherwise, the lookup failed and the message length will be five
bytes long (not counting the four byte header).

 Please note: This message's official name is not known, and has been invented.

~~~~~~~~~~~~~~~~

C > S [0x35] SID_PROFILE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (STRING) Username

Remarks:
This requests a profile for a user.

 Please note: This message's official name is not known, and has been invented.

~~~~~~~~~~~~~~~~

S > C [0x36] SID_CDKEY2
**************************************

Used By: Warcraft II

Format:
 (DWORD) Result
 (STRING) Key owner

Remarks:
This packet is identical to SID_CDKEY (0x30)

 Possible values for Result: 0x01: OK 0x02: Invalid key 0x03: Bad product 0x04: Banned 0x05: In use 
 In addition, the Key Owner field has two special values:

	* 'TOO MANY SPAWNS': Exceeded spawn limit for this CD-Key
 	* 'NO SPAWNING': Spawns are not supported for this CD-Key

~~~~~~~~~~~~~~~~

C > S [0x36] SID_CDKEY2
**************************************

Used By: Warcraft II

Format:
 (DWORD) Spawn (0/1)
 (DWORD) Key Length
 (DWORD) CDKey Product
 (DWORD) CDKey Value1
 (DWORD) Server Token
 (DWORD) Client Token
 (DWORD) [5] Hashed Data
 (STRING) Key owner

Remarks:
This packet is an updated version of SID_CDKEY (0x30), designed to prevent CDKeys from being stolen, by sending them
hashed instead of plain-text.

 The data that should be hashed is:

	* Client Token
	* Server Token
	* Key Product (from decoded CD key)
	* Key Value1 (from decoded CD key)
	* Key Value2 (from decoded CD key)

~~~~~~~~~~~~~~~~

S > C [0x3A] SID_LOGONRESPONSE2
**************************************

Used By: Diablo II, Diablo II LOD

Format:
 (DWORD) Result
 (STRING) Reason

Remarks:
Status: 0x00: Success 0x01: Account Does Not Exist 0x02: Invalid Password 0x06: Account Closed 
 The string containing the reason is only present when your account is closed, if not, it should be empty.

~~~~~~~~~~~~~~~~

C > S [0x3A] SID_LOGONRESPONSE2
**************************************

Used By: Diablo II, Diablo II LOD

Format:
 (DWORD) Client Token
 (DWORD) Server Token
 (DWORD) [5] Password Hash
 (STRING) Username

Remarks:
This packet is the same as SID_LOGONRESPONSE, but has additional response codes.

~~~~~~~~~~~~~~~~

S > C [0x3C] SID_CHECKDATAFILE2
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Warcraft II, Starcraft, Starcraft Japanese

Format:
 (DWORD) Result

Remarks:
Result of file integrity query.
 Result: 0x00: Not approved 0x01: Blizzard approved 0x02: Approved for ladder

~~~~~~~~~~~~~~~~

C > S [0x3C] SID_CHECKDATAFILE2
**************************************

Used By: Starcraft Shareware, Starcraft Broodwar, Warcraft II, Starcraft, Starcraft Japanese

Format:
 (DWORD) File size in bytes
 (DWORD) File hash [5]
 (STRING) Filename

Remarks:
Verifies that a file is authentic, by producing a hash of that file and sending it to the server for comparison to the
original.

 The hash is produced by hashing 64-byte chunks of the file. Each time after the first, the result of the previous hash
is used to initialize for example, "Orc Peon" is 'opeo') (BYTE) Number of ladder records to read; this will be between 0
and 3. For each ladder record: (DWORD) Ladder type; valid types are 'SOLO', 'TEAM', or 'FFA ' (where the last character
of 'FFA ' is a space, 0x20). (WORD) Number of wins (WORD) Number of losses (BYTE) Level (BYTE) Hours until XP decay, if
applicable* (WORD) Experience (DWORD) Rank (will be 0 if unranked) (BYTE) Number of race records to read; this will be 5
for WAR3 and 6 for W3XP. For each race record: (WORD) Wins (WORD) Losses (BYTE) Number of team records to read. For each
team record: (DWORD) Type of team; valid types are '2VS2', '3VS3', and '4VS4'. (WORD) Number of wins (WORD) Number of
losses (BYTE) Level (BYTE) Hours until XP decay, if applicable* (WORD) Experience (DWORD) Rank (will be 0 if unranked)
(FILETIME) Time of last game played (BYTE) Number of partners (STRING)[] Names of partners For subcommand 0x08 (Clan
stats request): (DWORD) Cookie (BYTE) Number of ladder records to read; this will be between 0 and 3.  For each ladder
record: (DWORD) Ladder type; valid types are 'SOLO', 'TEAM', or 'FFA ' (where the last character of 'FFA ' is a space,
0x20). (WORD) Number of wins (WORD) Number of losses (BYTE) Level (BYTE) Hours until XP decay, if applicable* (WORD)
Experience (DWORD) Rank (will be 0 if unranked) (BYTE) Number of race records to read; this will be 5 for WAR3 and 6 for
W3XP.  For each race record: (WORD) Wins (WORD) Losses For subcommand 0x09 (Icon list request): (DWORD) Cookie (DWORD)
Unknown (BYTE) Tiers (BYTE) Count For each Icon: (DWORD) Icon (DWORD) Name (BYTE) Race (WORD) Wins required (BYTE)
Unknown 

Remarks:
This message is still being researched!

 This message is used for multiple purposes on Warcraft III. Known and validated purposes are listed here.

 * The field "Hours until XP decay" is unconfirmed; however, testing numbers correspond to values expected within the
"Days until XP decay" displayed on the live Battle.net ladder website. It is also included but unused (ignored) in the
Clan Stats Request command (0x08).

~~~~~~~~~~~~~~~~

C > S [0x44] SID_WARCRAFTGENERAL
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (BYTE) Subcommand ID

 For subcommand 0x02 (Request ladder map listing): (DWORD) Cookie (BYTE) Number of types requested (DWORD)[] Request
data * For subcommand 0x03 (Cancel ladder game search): [blank] For subcommand 0x04 (User stats request): (DWORD) Cookie
(STRING) Account name (DWORD) Product ID For subcommand 0x08 (Clan stats request): (DWORD) Cookie (DWORD) Clan Tag
(DWORD) Product ID ('WAR3' or 'W3XP') For subcommand 0x09 (Icon list request): (DWORD) Cookie For subcommand 0x0A
(Change icon): (DWORD) Icon 

Remarks:
This packet is used for multiple purposes on Warcraft III. Known and validated purposes are listed here.

 *Not fully known yet.

~~~~~~~~~~~~~~~~

C > S [0x45] SID_NETGAMEPORT
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (WORD) Port

Remarks:
Sets the port used by the client for hosting WAR3/W3XP games. This value is retreived from HKCUSoftwareBlizzard
EntertainmentWarcraft IIIGameplaynetgameport, and is sent after the user logs on.

~~~~~~~~~~~~~~~~

S > C [0x46] SID_NEWS_INFO
**************************************

Used By: Diablo II, Warcraft III: TFT, Diablo II LOD, Warcraft III

Format:
 (BYTE) Number of entries
 (DWORD) Last logon timestamp
 (DWORD) Oldest news timestamp
 (DWORD) Newest news timestamp

 For each entry:(DWORD) Timestamp (STRING) News

Remarks:
This packet contains news from battle.net. Timestamps are in C/Unix format, biased for UTC.

 Multiple separate news messages can be received. These should be treated the same as if one message was sent with
several news entries.

 If the 'Timestamp' field for an entry is zero, then that entry is the message of the day (and not a news entry in the
normal respect).

~~~~~~~~~~~~~~~~

C > S [0x46] SID_NEWS_INFO
**************************************

Used By: Diablo II, Warcraft III: TFT, Diablo II LOD, Warcraft III

Format:
 (DWORD) News timestamp

Remarks:
Requests news and MOTD from battle.net.

 The news timestamp specifies the starting date for the news. To retrieve all available news entries, set this to zero.
Timestamps are given in C/Unix format -- that is, the number of seconds since January 1, 1970 0:00:00.000 -- and should
be biased to UTC.

 This message should be sent when you receive SID_ENTERCHAT. The official client stops processing messages after the
user joins a game or enters a channel, and discards messages with more than 127 entries.

 News can be requested for older products, but Battle.net will only return the server's Message-of-the-Day. However,
this behavior has not been observed in official clients, and for an accurate protocol emulation, its use is not
recommended.

~~~~~~~~~~~~~~~~

S > C [0x4A] SID_OPTIONALWORK
**************************************

Used By: Starcraft Broodwar, Diablo II, Warcraft III: TFT, Starcraft, Diablo II LOD, Warcraft III

Format:
 (STRING) MPQ Filename

Remarks:
Using SID_GETFILETIME with request ID 0x80000005, the client should download this file and call the ExtraWork function
inside of it. Generally, this message is used for the optional ExtraWork DLL.

 The client will only execute this entirely if the registry key HKCUSoftwareBattle.netOptimizeSysDesc [REG_DWORD] is
set to 1.

~~~~~~~~~~~~~~~~

C > S [0x4B] SID_EXTRAWORK
**************************************

Used By: Starcraft Broodwar, Diablo II, Warcraft III: TFT, Starcraft, Diablo II LOD, Warcraft III

Format:
 (WORD) Game type
 (WORD) Length
 (STRING) Work returned data 

Remarks:
Response for both SID_OPTIONALWORK and SID_REQUIREDWORK.

 Game type:
 0x01: Diablo II 0x02: Warcraft III 0x03: Starcraft 0x04: World of Warcraft (Reason for this is not known, but most
recent libraries have included it) 
 Length:The length is returned from the call to ExtraWork in the ExtraWork DLL. Traditionally, the library responsible
for all ExtraWork requests has been IX86ExtraWork.dll. Work returned data:This data is based on a 1024-byte buffer. The
call to ExtraWork takes in a structure and returns the length and buffer based on the game type.

~~~~~~~~~~~~~~~~

S > C [0x4C] SID_REQUIREDWORK
**************************************

Used By: Starcraft Broodwar, Diablo II, Warcraft III: TFT, Starcraft, Diablo II LOD, Warcraft III

Format:
 (STRING) ExtraWork MPQ FileName

Remarks:
Using SID_GETFILETIME with request ID 0x80000006, the client should download the specified MPQ file, extract
ExtraWork.dll and call the ExtraWork function inside of it.

~~~~~~~~~~~~~~~~

S > C [0x4E] SID_TOURNAMENT
**************************************

Used By: Starcraft Broodwar, Starcraft

Format:
 (BYTE) Unknown
 (BYTE) Unknown, maybe number of non-null strings sent?
 (STRING) Description
 (STRING) Unknown
 (STRING) Website
 (DWORD) Unknown
 (STRING) Name
 (STRING) Unknown
 (STRING) Unknown
 (STRING) Unknown
 (DWORD[5]) Unknown

Remarks:
RESEARCH REQUESTED. Sent after a successful logon to an account in a WCG tournament. 
 The 0x0C packet sent with 0x01 flags would automatically have the user join channel WCG planetname #. 

 PACKET LOG FF 4E 58 00 01 03 57 6F 72 6C 64 20 43 79 62 65 72 20 47 61 6D 65 73 20 28 53 61 74 75 72 6E 29 00 00 68 74
74 70 3A 2F 2F 77 77 77 2E 77 63 67 2E 63 6F 6D 00 57 43 47 00 00 00 00 00 80 07 01 00 00 00 00 00 01 01 00 02 02 00 00
00 00 01 05 00 00 00 00 32 00 00 00

~~~~~~~~~~~~~~~~

S > C [0x50] SID_AUTH_INFO
**************************************

Used By: Starcraft Broodwar, Diablo II, Warcraft III: TFT, Starcraft, Diablo II LOD, Warcraft III

Format:
 (DWORD) Logon Type
 (DWORD) Server Token
 (DWORD) UDPValue *
 (FILETIME) MPQ filetime
 (STRING) IX86ver filename
 (STRING) ValueString

 WAR3/W3XP Only:
 (VOID) 128-byte Server signature

Remarks:
Contains the Server Token, and the values used in CheckRevision.

 Possible Logon Type values:0x00: Broken SHA-1 (STAR/SEXP/D2DV/D2XP) S [0x50] SID_AUTH_INFO
**************************************

Used By: Starcraft Broodwar, Diablo II, Warcraft III: TFT, Starcraft, Diablo II LOD, Warcraft III

Format:
 (DWORD) Protocol ID (0)
 (DWORD) Platform ID 
 (DWORD) Product ID 
 (DWORD) Version Byte
 (DWORD) Product language
 (DWORD) Local IP for NAT compatibility*
 (DWORD) Time zone bias*
 (DWORD) Locale ID*
 (DWORD) Language ID*
 (STRING) Country abreviation 
 (STRING) Country

Remarks:
Sends information about the Client to Battle.net.

 *These fields can be set to zero without breaking logon.

 Protocol ID:Battle.net's current Protocol ID is 0. Platform ID:A DWORD specifying the client's platform (IX86, PMAC,
XMAC, etc). Product ID:A DWORD specifying the client's game. Version:The client's version byte. Product Language:This
field is under investigation. It can safely be set to 0. MPQ Locale ID:This field is part of Blizzards multi-lingual MPQ
system. Is used to specify which version of an MPQ should be used when the MPQ is available in multiple languages. Local
IP:This is the local network IP of the client, in network byte order. Timezone bias:The difference, in minutes, between
UTC and local time. The client calculates this value by subtracting the Local Time from the System Time, having
converted both to Filetime structures, and then converting the resultant offset to minutes by diving it by 600,000,000.
If you wish to understand the mechanism involved, read Microsoft's documentation on File times. Language ID, Country
Abbreviation, and Country:These values can be retrieved by querying the system's locale information. Language ID can be
retrieved using the GetUserDefaultLangID [6] API.
 Country Abbreviation & Country can be retrieved using the GetLocaleInfo [7] API to request the LOCALE_SABBREVCTRYNAME
and LOCALE_SENGCOUNTRY, respectively.

~~~~~~~~~~~~~~~~

S > C [0x51] SID_AUTH_CHECK
**************************************

Used By: Starcraft Broodwar, Diablo II, Warcraft III: TFT, Starcraft, Diablo II LOD, Warcraft III

Format:
 (DWORD) Result
 (STRING) Additional Information

Remarks:
Reports success/failure on version & CD Key check.

 Result:
 0x000: Passed challenge
 0x100: Old game version (Additional info field supplies patch MPQ filename)
 0x101: Invalid version
 0x102: Game version must be downgraded 
 (Additional info field supplies patch MPQ filename)
 0x0NN: (where NN is the version code supplied in SID_AUTH_INFO): Invalid version code (note that 0x100 is not set in
this case).
 0x200: Invalid CD key 
 0x201: CD key in use (Additional info field supplies name of user)
 0x202: Banned key
 0x203: Wrong product
 The last 4 codes also apply to the second CDKey, as indicated by a bitwise combination with 0x010.

 If a patch file cannot be found, additional info is set to 'non-existent'. If either the executable size/date or the
version code is wrong, the server will typically return a failure status.

 More:
 While doing a little research on how Battle.net autoupdates it's clients, I found that it (STAR, anyway) does not use
the provisions of the SID_AUTH login system to tell clients which update file to download. Instead, it sends a
SID_REPORTVERSION (from the previous logon system) containing the equivalent error code and the name of the patch file
to download. This seems strange, and makes me think that the part of Battle.net responsible for updating clients is
isolated from the part responsible for processing logon requests. If this is the case, it makes sense that that system
was never updated, since it must still support legacy clients. In addition, this would explain why most Blizzard clients
retain obsolete packet processing code.

~~~~~~~~~~~~~~~~

C > S [0x51] SID_AUTH_CHECK
**************************************

Used By: Starcraft Broodwar, Diablo II, Warcraft III: TFT, Starcraft, Diablo II LOD, Warcraft III

Format:
 (DWORD) Client Token
 (DWORD) EXE Version
 (DWORD) EXE Hash
 (DWORD) Number of CD-keys in this packet
 (BOOLEAN) Spawn CD-key

 For Each Key:(DWORD) Key Length (DWORD) CD-key's product value (DWORD) CD-key's public value (DWORD) Unknown (0)
(DWORD) [5] Hashed Key Data 
 (STRING) Exe Information
 (STRING) CD-Key owner name

Remarks:
Contains the EXE Version and Hash as reported by CheckRevision(), and CDKey values. Spawn may only be used for STAR and
W2BN.

 The data that should be hashed for 'Hashed Key Data' is:

	* Client Token
	* Server Token
	* Key Product (from decoded CD key)
	* Key Public (from decoded CD key)
	* (DWORD) 0
	* Key Private (from decoded CD key)

~~~~~~~~~~~~~~~~

S > C [0x52] SID_AUTH_ACCOUNTCREATE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Status

Remarks:
The message reports the success or failure of an account creation attempt. 

 Status:0x00: Successfully created account name. 0x04: Name already exists. 0x07: Name is too short/blank. 0x08: Name
contains an illegal character. 0x09: Name contains an illegal word. 0x0a: Name contains too few alphanumeric characters.
0x0b: Name contains adjacent punctuation characters. 0x0c: Name contains too many punctuation characters. Any other:
Name already exists.

~~~~~~~~~~~~~~~~

C > S [0x52] SID_AUTH_ACCOUNTCREATE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (BYTE) [32] Salt (s)
 (BYTE) [32] Verifier (v)
 (STRING) Username

Remarks:
This message is sent to create an NLS-style account. It contains the client's salt and verifier values, which are saved
by the server for use with future logons.

 See the [NLS/SRP Protocol] page for more information.

~~~~~~~~~~~~~~~~

S > C [0x53] SID_AUTH_ACCOUNTLOGON
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Status
 (BYTE) [32] Salt (s)
 (BYTE) [32] Server Key (B)

Remarks:
Reports the success or failure of the logon request.

 Possible status codes:0x00: Logon accepted, requires proof. 0x01: Account doesn't exist. 0x05: Account requires
upgrade. Other: Unknown (failure). 
 See the [NLS/SRP Protocol] document for more information.

~~~~~~~~~~~~~~~~

C > S [0x53] SID_AUTH_ACCOUNTLOGON
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (BYTE) [32] Client Key ('A')
 (STRING) Username 

Remarks:
This message is sent to the server to initiate a logon. It consists of the client's public key and their UserName.

 The client's public key is a value calculated by the client and used for a single logon. For more information, see
[NLS/SRP Protocol].

~~~~~~~~~~~~~~~~

S > C [0x54] SID_AUTH_ACCOUNTLOGONPROOF
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Status
 (BYTE) [20] Server Password Proof (M2)
 (STRING) Additional information

Remarks:
Status0x00: Logon successful. S [0x54] SID_AUTH_ACCOUNTLOGONPROOF
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (BYTE) [20] Client Password Proof (M1)

Remarks:
This message is sent to the server after a successful SID_AUTH_ACCOUNTLOGON. It contains the client's password proof.
See [NLS/SRP Protocol] for more information.

~~~~~~~~~~~~~~~~

S > C [0x55] SID_AUTH_ACCOUNTCHANGE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Status
 (BYTE) [32] Salt (s)
 (BYTE) [32] Server key (B)

Remarks:
Reports success or failure on a password change operation.

 Status Codes:0x00: Change accepted, requires proof. 0x01: Account doesn't exist. 0x05: Account requires upgrade - see
SID_AUTH_ACCOUNTUPGRADE Other: Unknown (failure). 
 If an error occurs, the salt and server key values are set to zero.

~~~~~~~~~~~~~~~~

C > S [0x55] SID_AUTH_ACCOUNTCHANGE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (BYTE) [32] Client key (A)
 (STRING) Username

Remarks:
This message is used to change the client's password.

~~~~~~~~~~~~~~~~

S > C [0x56] SID_AUTH_ACCOUNTCHANGEPROOF
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Status code
 (BYTE) [20] Server password proof for old password (M2) 

Remarks:
This message reports success or failure for a password change operation.

 Status codes:0x00: Password changed 0x02: Incorrect old password

~~~~~~~~~~~~~~~~

C > S [0x56] SID_AUTH_ACCOUNTCHANGEPROOF
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (BYTE) [20] Old password proof
 (BYTE) [32] New password's salt (s)
 (BYTE) [32] New password's verifier (v) 

Remarks:
This message is sent after receiving a successful SID_AUTH_ACCOUNTCHANGE message, and contains the proof for the
client's new password.

 See [NLS/SRP Protocol] for more information.

~~~~~~~~~~~~~~~~

S > C [0x57] SID_AUTH_ACCOUNTUPGRADE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Status
 (DWORD) Server Token 

Remarks:
Status Codes:0x00: Upgrade request accepted. Other: Upgrade request denied.

~~~~~~~~~~~~~~~~

C > S [0x57] SID_AUTH_ACCOUNTUPGRADE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 [blank]

Remarks:
This message is sent to upgrade an old account to an NLS-style account. It should be sent when SID_AUTH_ACCOUNTLOGON or
SID_AUTH_ACCOUNTCHANGE indicates that an account upgrade is required.

~~~~~~~~~~~~~~~~

S > C [0x58] SID_AUTH_ACCOUNTUPGRADEPROOF
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Status
 (DWORD) [5] Password proof

Remarks:
Status codes:0x00: Password changed 0x02: Incorrect old password

~~~~~~~~~~~~~~~~

C > S [0x58] SID_AUTH_ACCOUNTUPGRADEPROOF
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Client Token
 (DWORD) [5] Old Password Hash
 (BYTE) [32] New Password Salt
 (BYTE) [32] New Password Verifier

Remarks:
 Old Password Hash: Broken SHA-1 Double password hash as seen in SID_LOGONRESPONSE(2) OLS. New Password Salt the client
sends two CDKey hashes in SID_AUTH_CHECK and uses 'W3XP' as the Product Id in SID_AUTH_INFO. After a successful
SID_AUTH_CHECK, the client then sends this packet with the Product ID set to 'WAR3' to make the switch from expansion to
non-expansion.

~~~~~~~~~~~~~~~~

S > C [0x5E] SID_WARDEN
**************************************

Used By: Starcraft Broodwar, Warcraft III: TFT, Starcraft, Warcraft III

Format:
 (VOID) Encrypted Packet
  Contents of encrypted data (BYTE) Packet Code   0x00 - Warden Module Info (DWORD)[4] MD5 Hash of the current Module
(DWORD)[4] Decryption key for Module (DWORD) Length of Module     0x01 - Warden Module Data (WORD) Length of data
(without 3-byte header) (VOID) Data     0x02 - Data Checker (BYTE) String Length (Usually 0) (VOID) String Data   (BYTE)
Check ID   MEM_CHECK: (BYTE) String Index (Usually 0) (DWORD) Address (BYTE) Length to Read     PAGE_CHECK_A: (DWORD)
Unknown (Seed?) (DWORD)[5] SHA1 (DWORD) Address (BYTE) Length to Read     (BYTE) IDXor     0x03 - Library Loader (WORD)
Length of data (without 7-byte header) (DWORD) Checksum of data (without 7-byte header) (BYTE) Unknown (0x01) (BYTE)
Unknown (Usually 0x00) (BYTE) Unknown (Usually 0x01) (STRING) Library Name (DWORD) Funct1 (DWORD) Funct2 (DWORD) Funct3
(DWORD) Funct4     0x05 - Initialization (DWORD)[5] Unknown   

Remarks:
This packet is received after successfully logging onto Battle.net and usually after receiving the first initial chat
events. If the client does not respond to this packet, the client gets dropped two minutes later (give or take about 10
seconds).

 The packet is encrypted via standard RC4 hashing, using one key for outbound data and another for inbound. Its purpose
is to download and execute Warden modules. Full information on how to handle this packet may be found at the Rudimentary
Warden information [8] topic.

 Documentation provided by iago and Ringo.

~~~~~~~~~~~~~~~~

C > S [0x5E] SID_WARDEN
**************************************

Used By: Starcraft Broodwar, Warcraft III: TFT, Starcraft, Warcraft III

Format:
 (VOID) Encrypted Packet
  Contents of encrypted data (BYTE) Packet Code   0x00 - Warden Module Info (BYTE) Success (0x00 = Don't have the
module, 0x01 = Have the module)     0x01 - Warden Module Data (BYTE) Success (0x00 = MD5 doesn't match, 0x01 = MD5
matches)     0x02 - Data Checker (WORD) String Length (DWORD) String Checksum   (VOID) String Data   MEM_CHECK: (BYTE)
Success (0x00 = Read data, 0x01 = Unable to read) (VOID) Data (0x00 only)     PAGE_CHECK_A: (BYTE) Success (0x00 = SHA1s
match, 0x01 = SHA1s don't match)     (BYTE) IDXor     0x04 - Initialization (DWORD)[4] Unknown   

Remarks:
The packet is encrypted via standard RC4 hashing, using one key for outbound data and another for inbound. Its purpose
is to return executable data and checksum information from various Warden modules. Full information on how to handle
this packet may be found at the Rudimentary Warden information [9] topic.

 Documentation provided by iago and Ringo.

~~~~~~~~~~~~~~~~

S > C [0x60] SID_GAMEPLAYERSEARCH
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (BYTE) Number of players
 (STRING) [] Player names 

Remarks:
Returns a list of available players for an arranged team ladder game. Players who are considered available: have no
away message on, are mutual friends in the chat environment, or non-friend listed users in the same channel as you.

~~~~~~~~~~~~~~~~

C > S [0x60] SID_GAMEPLAYERSEARCH
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 [blank]

Remarks:
This message requests a list of players for an arranged team game.

~~~~~~~~~~~~~~~~

S > C [0x65] SID_FRIENDSLIST
**************************************

Used By: Starcraft Broodwar, Warcraft III: TFT, Starcraft, Warcraft III

Format:
 (BYTE) Number of Entries
 For each entry:
 (STRING) Account
 (BYTE) Status
 (BYTE) Location
 (DWORD) ProductID
 (STRING) Location name

Remarks:
This packet contains the current user's Friends List. If the friend is offline, their ProductID is 0. Location is only
supplied when it is relevant - for example, if Status is set to offline (0x00), the location string will be empty.

 Possible bitwise values for Status:
 0x01: Mutual
 0x02: DND
 0x04: Away
 Possible values for Location:
 0x00: Offline
 0x01: Not in chat
 0x02: In chat
 0x03: In a public game
 0x04: In a private game, and you are not that person's friend.
 0x05: In a private game, and you are that person's friend.

 Whether you are a particular user's friend causes different behavior when receiving information about the type of game
the user is in (this is true when receiving friend updates, too). When the Location field is 0x04, the user is in a
password-protected game, and you are not on that user's friends list. When it is 0x05, the user is in a
password-protected game, and you are on that user's friends list.

 For example, let's say MyndFyre is logging on and Arta[vL] is on his friends list. Arta[vL] is also in a
password-protected game. MyndFyre is not on Arta[vL]'s friends list. MyndFyre will receive location 0x04 for Arta[vL]
and the Channel parameter will be a NULL string. And, if MyndFyre were to type in /f l, Battle.net would respond with
SID_CHATEVENT saying "1. Arta[vL] is in a private game."

 On the other hand, if Arta[vL] had listed MyndFyre as a friend, then on logon, MyndFyre will receive location 0x05 for
Arta[vL] and the name of the password-protected game will come through the Channel parameter of the message. If MyndFyre
were to type in /f l, Battle.net would respond with "1. Arta[vL] is in the private game vL."

~~~~~~~~~~~~~~~~

C > S [0x65] SID_FRIENDSLIST
**************************************

Used By: Starcraft Broodwar, Warcraft III: TFT, Starcraft, Warcraft III

Format:
 [blank]

Remarks:
Requests a friends list.

~~~~~~~~~~~~~~~~

S > C [0x66] SID_FRIENDSUPDATE
**************************************

Used By: Starcraft Broodwar, Warcraft III: TFT, Starcraft, Warcraft III

Format:
 (BYTE) Entry number
 (BYTE) Friend Location
 (BYTE) Friend Status
 (DWORD) ProductID
 (STRING) Location

Remarks:
Sent to clients supporting this packet when the friendlisted account's Status changes. The first friend is always entry
0. 

 Note that there is a Battle.net server bug in which when you are automatically sent this packet, the Product ID is
your own Product ID instead of your friend's. So if you were to be using WAR3, for example, and a friend signs on using
SEXP, the Product ID in this packet will be WAR3. To receive the *correct* Product ID for the user, you may request
another update for this user (by sending 0x66 back to the server with the same Entry Number), or request the full list
again.

 In addition, this packet is not sent to you automatically if the friendship is not mutual.

~~~~~~~~~~~~~~~~

C > S [0x66] SID_FRIENDSUPDATE
**************************************

Used By: Starcraft Broodwar, Warcraft III: TFT, Starcraft, Warcraft III

Format:
 (BYTE) Friends list index

Remarks:
Friends List index is 0-based. (i.e.: friend #1 on friends list would have a value of 0 in this message, friend #2
would have a value of 1). This message requests a check for your friend to see if there are any updates. The server
should immediately reply with SID_FRIENDUPDATE.

~~~~~~~~~~~~~~~~

S > C [0x67] SID_FRIENDSADD
**************************************

Used By: Starcraft Broodwar, Warcraft III: TFT, Starcraft, Warcraft III

Format:
 (STRING) Account
 (BYTE) Friend Type
 (BYTE) Friend Status
 (DWORD) ProductID
 (STRING) Location 

Remarks:
Sent to clients supporting this packet when an account is added to the client's friendlist. New friends are appended to
the list.

 Values and meanings for Friend Type:

 0x00: Non-mutual
 0x01: Mutual
 0x02: Nonmutual, DND
 0x03: Mutual, DND
 0x04: Nonmutual, Away
 0x05: Mutual, Away

 Value and meanings for Friend Status:

 0x00: Offline
 0x02: In chat
 0x03: In public game
 0x05: In private game

 See SID_FRIENDSLIST for more information.

~~~~~~~~~~~~~~~~

S > C [0x68] SID_FRIENDSREMOVE
**************************************

Used By: Starcraft Broodwar, Warcraft III: TFT, Starcraft, Warcraft III

Format:
 (BYTE) Entry Number

Remarks:
Sent to clients supporting this packet when an entry is removed from the client's friendlist. Accounts positioned after
the specified Entry Number in the friendlist are moved up by one.

 See SID_FRIENDSLIST for more information.

~~~~~~~~~~~~~~~~

S > C [0x69] SID_FRIENDSPOSITION
**************************************

Used By: Starcraft Broodwar, Warcraft III: TFT, Starcraft, Warcraft III

Format:
 (BYTE) Old Position
 (BYTE) New Position

Remarks:
Sent to clients supporting this packet when a friend is promoted or demoted the friend's list.

 See SID_FRIENDSLIST for more information.

~~~~~~~~~~~~~~~~

S > C [0x70] SID_CLANFINDCANDIDATES
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (BYTE) Status
 (BYTE) Number of potential candidates
 (STRING) [] Usernames

Remarks:
Contains the list of potential candidates.

 Valid Status codes:0x00: Successfully found candidate(s)
 0x01: Clan tag already taken
 0x08: Already in clan
 0x0a: Invalid clan tag specified

~~~~~~~~~~~~~~~~

C > S [0x70] SID_CLANFINDCANDIDATES
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (DWORD) Clan Tag

Remarks:
This message is sent to the server to check for viable candidates in the channel and friend list, and also to check the
availability of the specified clan tag. If 9 or more candidates are found, the official client prompted with a selection
of users that he wants to invite to start a clan.

~~~~~~~~~~~~~~~~

S > C [0x71] SID_CLANINVITEMULTIPLE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (BYTE) Result
 (STRING) [] Failed account names

Remarks:
Multiple invitation response.

 Result:0x00: Success (everyone accepted)
 0x04: Declined
 0x05: Not available (not in channel or already in a clan) Failed account names:A list of accountnames which failed to
accept the invitation successfully. On complete success, this is null.

~~~~~~~~~~~~~~~~

C > S [0x71] SID_CLANINVITEMULTIPLE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (STRING) Clan name
 (DWORD) Clan tag
 (BYTE) Number of users to invite
 (STRING) [] Usernames to invite 

Remarks:
This message is used to invite the initial 9 required members to a new clan. The users specified in this packet will
receive 0x72.

~~~~~~~~~~~~~~~~

S > C [0x72] SID_CLANCREATIONINVITATION
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (DWORD) Clan Tag
 (STRING) Clan Name
 (STRING) Inviter's username
 (BYTE) Number of users being invited
 (STRING) [] List of users being invited 

Remarks:
Received when a user is inviting you to create a new clan on Battle.net.

~~~~~~~~~~~~~~~~

C > S [0x72] SID_CLANCREATIONINVITATION
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (DWORD) Clan tag
 (STRING) Inviter name
 (BYTE) Status

Remarks:
This message is used to reply to an invitation to create a new clan.

~~~~~~~~~~~~~~~~

S > C [0x73] SID_CLANDISBAND
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (BYTE) Result

Remarks:
Result:0x00: Successfully disbanded the clan
 0x02: Cannot quit clan, not one week old yet
 0x07: Not authorized to disband the clan

~~~~~~~~~~~~~~~~

C > S [0x73] SID_CLANDISBAND
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie

Remarks:
Disbands the clan of which the client is a member. You must be a leader to send this packet.

~~~~~~~~~~~~~~~~

S > C [0x74] SID_CLANMAKECHIEFTAIN
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (BYTE) Status

Remarks:
Notifies the sending client of the success/failure of its request.
 Status:0x00: Success
 0x02: Can't change until clan is a week old
 0x04: Declined
 0x05: Failed
 0x07: Not Authorized
 0x08: Not Allowed

~~~~~~~~~~~~~~~~

C > S [0x74] SID_CLANMAKECHIEFTAIN
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (STRING) New Cheiftain

Remarks:
Changes the clan's chieftain.

~~~~~~~~~~~~~~~~

S > C [0x75] SID_CLANINFO
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (BYTE) Unknown (0)
 (DWORD) Clan tag
 (BYTE) Rank

Remarks:
This message is received when logging on, if you're a member of a clan. It is also sent when you join a clan.

 Possible values for Rank:0x00: Initiate that has been in the clan for less than one week
 0x01: Initiate that has been in the clan for over one week
 0x02: Member
 0x03: Officer
 0x04: Leader

~~~~~~~~~~~~~~~~

S > C [0x76] SID_CLANQUITNOTIFY
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (BYTE) Status

Remarks:
The only known status code for this packet is 0x01 (Removed from clan).

~~~~~~~~~~~~~~~~

S > C [0x77] SID_CLANINVITATION
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (BYTE) Result

Remarks:
This packet is sent to inform the client of the reply to an invitation.

 Result:0x00: Invitation accepted
 0x04: Invitation declined
 0x05: Failed to invite user
 0x09: Clan is full

~~~~~~~~~~~~~~~~

C > S [0x77] SID_CLANINVITATION
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (STRING) Target User

Remarks:
This message is used when a leader or officer invites a user to join their clan.

~~~~~~~~~~~~~~~~

S > C [0x78] SID_CLANREMOVEMEMBER
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (BYTE) Status 

Remarks:
Response when removing a member from your clan.

 Status constants:0x00: Removed
 0x01: Removal failed
 0x02: Can not be removed yet
 0x07: Not authorized to remove
 0x08: Not allowed to remove

~~~~~~~~~~~~~~~~

C > S [0x78] SID_CLANREMOVEMEMBER
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (STRING) Username

Remarks:
Kick a member out of the clan. Only clan leaders and officers may perform this action successfully. Members can only be
removed if they've been in the clan for over one week.

~~~~~~~~~~~~~~~~

S > C [0x79] SID_CLANINVITATIONRESPONSE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (DWORD) Clan tag
 (STRING) Clan name
 (STRING) Inviter 

Remarks:
This packet is recieved when someone invites you to join a clan.

~~~~~~~~~~~~~~~~

C > S [0x79] SID_CLANINVITATIONRESPONSE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (DWORD) Clan tag
 (STRING) Inviter
 (BYTE) Response 

Remarks:
This packet is sent to accept or decline an invitation to a clan.

  Response: 0x04: Decline 0x06: Accept

~~~~~~~~~~~~~~~~

S > C [0x7A] SID_CLANRANKCHANGE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (BYTE) Status

Remarks:
This message returns the result of the clan rank change request.

 Result:0x00: Successfully changed rank
 0x01: Failed to change rank
 0x02: Cannot change user's rank yet
 0x07: Not authorized to change user rank *
 0x08: Not allowed to change user rank ** * This will be received when you are not a shaman/chieftain and you're trying
to change the rank of another user.

 ** This will be received when you are trying to change rank of someone who is higher than you, i.e. chieftain, or an
initiate.

~~~~~~~~~~~~~~~~

C > S [0x7A] SID_CLANRANKCHANGE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (STRING) Username
 (BYTE) New rank 

Remarks:
Used by leaders and officers to change the rank of a clan member.

 New rank:0x01: Initiate that has been in the clan for over one week
 0x02: Member
 0x03: Officer

~~~~~~~~~~~~~~~~

C > S [0x7B] SID_CLANSETMOTD
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (STRING) MOTD

Remarks:
Sets your clan's Message of the Day.

~~~~~~~~~~~~~~~~

S > C [0x7C] SID_CLANMOTD
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (DWORD) Unknown (0)
 (STRING) MOTD

Remarks:
This message contains the clan's Message of the Day.

~~~~~~~~~~~~~~~~

C > S [0x7C] SID_CLANMOTD
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie

Remarks:
Requests the clan's MOTD.

~~~~~~~~~~~~~~~~

S > C [0x7D] SID_CLANMEMBERLIST
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (BYTE) Number of Members
 For each member:(STRING) Username
 (BYTE) Rank
 (BYTE) Online Status
 (STRING) Location

Remarks:
Contains the members of a clan.

 Online Status:0x00: Offline
 0x01: Online Rank:0x00: Initiate that has been in the clan for less than one week
 0x01: Initiate that has been in the clan for over one week
 0x02: Member
 0x03: Officer
 0x04: Leader Location:Where the user is, i.e., game name, channel name, or this may be null if the user is not online.

~~~~~~~~~~~~~~~~

C > S [0x7D] SID_CLANMEMBERLIST
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie

Remarks:
Requests a clan memberlist.

~~~~~~~~~~~~~~~~

S > C [0x7E] SID_CLANMEMBERREMOVED
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (STRING) Clan member name

Remarks:
Notifies the members of a clan that a user has been removed.

~~~~~~~~~~~~~~~~

S > C [0x7F] SID_CLANMEMBERSTATUSCHANGE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (STRING) Username
 (BYTE) Rank
 (BYTE) Status
 (STRING) Location

Remarks:
This message is received when a member changes their status (by going online, offline, being promoted, etc).

 Username:The name of the member whose status is changing (by going online, offline, being promoted, etc). Rank:0x00:
Initiate that has been in the clan for less than one week
 0x01: Initiate that has been in the clan for over one week
 0x02: Member
 0x03: Officer
 0x04: Leader Status:0x00: Offline
 0x01: Online (not in either channel or game)
 0x02: In a channel
 0x03: In a public game
 0x05: In a private game Location:This field is where the user is, i.e., game name, channel name.

~~~~~~~~~~~~~~~~

S > C [0x81] SID_CLANMEMBERRANKCHANGE
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (BYTE) Old rank
 (BYTE) New rank
 (STRING) Clan member who changed your rank

Remarks:
Received from the server when a user is promoted or demoted.

 For information about the allowed values for the old and new rank fields, see [Clan Message Codes].

~~~~~~~~~~~~~~~~

S > C [0x82] SID_CLANMEMBERINFORMATION
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (BYTE) Status code
 (STRING) Clan name
 (BYTE) User's rank
 (FILETIME) Date joined

Remarks:
Status code:
 This message follows the same status codes as listed on the Clan Message Codes page.
 0x00 = success 0x0C = user not found in that clan

~~~~~~~~~~~~~~~~

C > S [0x82] SID_CLANMEMBERINFORMATION
**************************************

Used By: Warcraft III: TFT, Warcraft III

Format:
 (DWORD) Cookie
 (DWORD) User's clan tag
 (STRING) Username

Remarks:
This packet requests information about a user and their current status within their clan. If the user is in a clan,
it'll return what clan they're in, their rank, along with the time they joined it in a FILETIME structure.

~~~~~~~~~~~~~~~~

===============================
End of Generated Documentation
===============================
=======================================================
Battle.net Documentation generated by BNETDocs Redux
=======================================================


Links:
------
[1] http://msdn2.microsoft.com/en-us/library/ms724295.aspx
[2] http://msdn2.microsoft.com/en-us/library/ms724432.aspx
[3]
http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/winui/windowsuserinterface/windowing/dialogboxes/dialogboxreference/dialogboxfunctions/messagebox.asp
[4]
http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/winui/windowsuserinterface/windowing/dialogboxes/dialogboxreference/dialogboxfunctions/messagebox.asp
[5] http://forum.valhallalegends.com/index.php?topic=16255.0
[6] http://msdn2.microsoft.com/en-us/library/ms776265.aspx
[7] http://msdn2.microsoft.com/en-us/library/ms776270.aspx
[8] http://forum.valhallalegends.com/index.php?topic=17356.0
[9] http://forum.valhallalegends.com/index.php?topic=17356.0